<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JCV Fitness - Generador de Rutinas Personalizadas</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Bebas+Neue&display=swap" rel="stylesheet">
    <!-- Librer√≠as para PDF - jsPDF + html2canvas directamente -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --bg-card: rgba(15, 25, 45, 0.8);
            --bg-card-hover: rgba(20, 35, 60, 0.9);
            --accent-cyan: #22d3ee;
            --accent-blue: #3b82f6;
            --accent-green: #39ff14;
            --accent-neon: #39ff14;
            --accent-orange: #f59e0b;
            --accent-pink: #ec4899;
            --accent-purple: #8b5cf6;
            --accent-red: #ef4444;
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: rgba(34, 211, 238, 0.3);
            --gradient-main: linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%);
            --gradient-fire: linear-gradient(135deg, #ef4444 0%, #f59e0b 100%);
            --gradient-jcv: linear-gradient(135deg, #ef4444 0%, #39ff14 100%);
            --gradient-nature: linear-gradient(135deg, #39ff14 0%, #22d3ee 100%);
            --shadow-glow: 0 0 40px rgba(34, 211, 238, 0.4);
            --glow-cyan: 0 0 20px rgba(34, 211, 238, 0.5), 0 0 40px rgba(34, 211, 238, 0.3), 0 0 60px rgba(34, 211, 238, 0.1);
            --glow-neon: 0 0 20px rgba(57, 255, 20, 0.5), 0 0 40px rgba(57, 255, 20, 0.3);
            --glow-red: 0 0 20px rgba(239, 68, 68, 0.5), 0 0 40px rgba(239, 68, 68, 0.3);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background - Estilo JCV GYM (Azul + Rojo como ANIMAL X) */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(ellipse at -10% 50%, rgba(239, 68, 68, 0.2) 0%, transparent 40%),
                radial-gradient(ellipse at 110% 50%, rgba(34, 211, 238, 0.25) 0%, transparent 45%),
                radial-gradient(ellipse at 50% 110%, rgba(59, 130, 246, 0.15) 0%, transparent 35%),
                radial-gradient(ellipse at 50% -10%, rgba(57, 255, 20, 0.08) 0%, transparent 30%),
                radial-gradient(circle at 10% 90%, rgba(239, 68, 68, 0.1) 0%, transparent 25%),
                radial-gradient(circle at 90% 10%, rgba(34, 211, 238, 0.15) 0%, transparent 30%);
            pointer-events: none;
            z-index: 0;
            animation: pulseGlow 6s ease-in-out infinite alternate;
        }

        @keyframes pulseGlow {
            0% { opacity: 0.8; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.02); }
        }

        /* Efecto de part√≠culas/estrellas */
        .bg-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                radial-gradient(2px 2px at 20px 30px, rgba(255,255,255,0.3), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.2), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.3), transparent),
                radial-gradient(2px 2px at 130px 80px, rgba(255,255,255,0.2), transparent),
                radial-gradient(1px 1px at 160px 120px, rgba(255,255,255,0.4), transparent);
            background-size: 200px 200px;
            pointer-events: none;
            z-index: 0;
            animation: twinkle 4s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 40px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: var(--gradient-main);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: var(--shadow-glow);
        }

        .logo-text {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 48px;
            letter-spacing: 3px;
        }

        .logo-text span {
            color: var(--accent-cyan);
        }

        .header h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 42px;
            letter-spacing: 2px;
            margin-bottom: 10px;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Hero Section - Estilo TVT */
        .hero-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto 40px;
        }

        @media (max-width: 768px) {
            .hero-section {
                grid-template-columns: 1fr;
                text-align: center;
            }
            .hero-image {
                order: -1;
            }
        }

        .hero-content h1 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 52px;
            letter-spacing: 2px;
            line-height: 1.1;
            margin-bottom: 20px;
        }

        .hero-content h1 .highlight {
            color: var(--accent-cyan);
        }

        .hero-content h1 .italic-bold {
            font-style: italic;
            text-decoration: underline;
        }

        .hero-content p {
            font-size: 20px;
            color: var(--text-secondary);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .hero-image {
            position: relative;
            display: flex;
            justify-content: center;
        }

        .hero-image img {
            max-width: 100%;
            height: auto;
            max-height: 500px;
            object-fit: contain;
            filter: drop-shadow(0 0 40px rgba(34, 211, 238, 0.3));
        }

        .hero-stats {
            display: flex;
            gap: 30px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .hero-stats {
                justify-content: center;
            }
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 36px;
            color: var(--accent-cyan);
            display: block;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* CTA Button animado */
        .cta-button {
            display: inline-block;
            padding: 18px 50px;
            background: linear-gradient(135deg, #ef4444 0%, #f59e0b 100%);
            color: white;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 24px;
            letter-spacing: 2px;
            text-decoration: none;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            animation: bounce 2s infinite;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.4);
        }

        .cta-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px rgba(239, 68, 68, 0.6);
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* Testimonios Section */
        .testimonials-section {
            padding: 60px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .testimonials-title {
            text-align: center;
            margin-bottom: 40px;
        }

        .testimonials-title h2 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 42px;
            color: var(--accent-cyan);
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .testimonial-card {
            background: radial-gradient(circle farthest-corner at bottom left, rgba(0,0,0,0.55) 0%, rgba(36,34,34,0.75) 35%);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 0 30px rgba(34, 211, 238, 0.1);
        }

        .testimonial-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .testimonial-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-main);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .testimonial-info h4 {
            font-size: 18px;
            margin-bottom: 5px;
        }

        .testimonial-info span {
            color: var(--accent-green);
            font-size: 14px;
        }

        .testimonial-text {
            color: var(--text-secondary);
            font-style: italic;
            line-height: 1.6;
        }

        .testimonial-rating {
            margin-top: 15px;
            color: #fbbf24;
            font-size: 18px;
        }

        /* Progress Steps */
        .progress-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 50px;
            flex-wrap: wrap;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: var(--bg-card);
            border-radius: 50px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .progress-step.active {
            border-color: var(--accent-cyan);
            background: rgba(34, 211, 238, 0.1);
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.2);
        }

        .progress-step.completed {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.1);
        }

        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .progress-step.active .step-number {
            background: var(--gradient-main);
        }

        .progress-step.completed .step-number {
            background: var(--accent-green);
        }

        /* Form Sections */
        .form-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .form-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title h2 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 48px;
            letter-spacing: 4px;
            margin-bottom: 15px;
            font-style: italic;
            background: linear-gradient(135deg, #ffffff 0%, #22d3ee 50%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            filter: drop-shadow(0 0 30px rgba(34, 211, 238, 0.4));
        }

        .section-title p {
            color: #a8b8cc;
            font-size: 18px;
            font-weight: 400;
        }

        /* Option Cards Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .options-grid.small {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        .option-card {
            background: linear-gradient(145deg, rgba(18, 32, 55, 0.95), rgba(8, 18, 35, 0.98));
            border: 2px solid rgba(34, 211, 238, 0.35);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .option-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 16px;
            padding: 1px;
            background: linear-gradient(135deg, rgba(34, 211, 238, 0.3), transparent, rgba(59, 130, 246, 0.3));
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .option-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: rgba(34, 211, 238, 0.5);
            background: linear-gradient(145deg, rgba(20, 35, 55, 0.95), rgba(15, 28, 45, 0.98));
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), var(--glow-cyan);
        }

        .option-card:hover::before {
            opacity: 1;
        }

        .option-card.selected {
            border-color: var(--accent-cyan);
            background: linear-gradient(145deg, rgba(34, 211, 238, 0.15), rgba(15, 30, 50, 0.95));
            box-shadow: var(--glow-cyan), inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .option-card.selected::before {
            content: '‚úì';
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background: var(--accent-cyan);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--bg-primary);
        }

        .option-icon {
            width: 100px;
            height: 100px;
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 42px;
            margin-bottom: 20px;
            overflow: hidden;
            position: relative;
            background: radial-gradient(circle at bottom left, rgba(0,0,0,0.55) 0%, rgba(36,34,34,0.75) 35%);
            box-shadow:
                0 0 30px rgba(34, 211, 238, 0.3),
                inset 0 0 20px rgba(34, 211, 238, 0.1);
            border: 2px solid rgba(34, 211, 238, 0.3);
        }

        .option-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 22px;
            transition: transform 0.4s ease, filter 0.4s ease;
            filter: brightness(1.1) contrast(1.05);
        }

        .option-card:hover .option-icon img {
            transform: scale(1.15);
            filter: brightness(1.2) contrast(1.1);
        }

        .option-card:hover .option-icon {
            box-shadow:
                0 0 40px rgba(34, 211, 238, 0.5),
                0 0 60px rgba(34, 211, 238, 0.3),
                inset 0 0 25px rgba(34, 211, 238, 0.15);
            border-color: rgba(34, 211, 238, 0.6);
        }

        .option-icon.emoji-icon {
            font-size: 48px;
            background: radial-gradient(circle at bottom left, rgba(0,0,0,0.55) 0%, rgba(36,34,34,0.75) 35%);
            text-shadow: 0 0 20px rgba(255,255,255,0.3);
        }

        .option-card h3 {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 8px;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .option-card .subtitle {
            font-size: 14px;
            color: #22d3ee;
            margin-bottom: 12px;
            font-style: italic;
            font-weight: 500;
            text-shadow: 0 0 15px rgba(34, 211, 238, 0.3);
        }

        .option-card p {
            color: #b8c5d6;
            font-size: 14px;
            line-height: 1.7;
        }

        /* Color Variations */
        .option-card[data-color="cyan"] .option-icon { background: linear-gradient(135deg, #22d3ee 0%, #06b6d4 100%); }
        .option-card[data-color="blue"] .option-icon { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
        .option-card[data-color="green"] .option-icon { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .option-card[data-color="orange"] .option-icon { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .option-card[data-color="pink"] .option-icon { background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); }
        .option-card[data-color="purple"] .option-icon { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
        .option-card[data-color="red"] .option-icon { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .option-card[data-color="yellow"] .option-icon { background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }

        .btn {
            padding: 16px 40px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            border-color: var(--accent-cyan);
            background: var(--bg-card-hover);
        }

        .btn-primary {
            background: var(--gradient-main);
            color: var(--bg-primary);
            font-weight: 700;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-glow);
        }

        .btn-generate {
            background: linear-gradient(135deg, #f59e0b 0%, #ef4444 35%, #f59e0b 70%, #ef4444 100%);
            background-size: 300% 300%;
            color: white;
            font-size: 22px;
            font-weight: 800;
            padding: 24px 70px;
            text-transform: uppercase;
            letter-spacing: 3px;
            animation: shimmer 2.5s ease-in-out infinite;
            box-shadow: 0 10px 40px rgba(245, 158, 11, 0.4), 0 0 60px rgba(239, 68, 68, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .btn-generate::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: buttonShine 3s ease-in-out infinite;
        }

        @keyframes buttonShine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .btn-generate:hover {
            transform: scale(1.1) translateY(-3px);
            box-shadow: 0 20px 60px rgba(245, 158, 11, 0.5), 0 0 50px rgba(239, 68, 68, 0.4), 0 0 80px rgba(245, 158, 11, 0.2);
        }

        /* Time/Duration Slider */
        .slider-container {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .slider-value {
            font-size: 48px;
            font-weight: 800;
            color: var(--accent-cyan);
        }

        .slider-value span {
            font-size: 20px;
            color: var(--text-secondary);
        }

        input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: var(--bg-secondary);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--gradient-main);
            cursor: pointer;
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.5);
        }

        /* Multi-select for exercises */
        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .exercise-card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .exercise-card:hover {
            border-color: var(--accent-cyan);
        }

        .exercise-card.selected {
            border-color: var(--accent-green);
            background: rgba(16, 185, 129, 0.1);
        }

        .exercise-emoji {
            font-size: 32px;
        }

        .exercise-info h4 {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .exercise-info .tech-name {
            font-size: 12px;
            color: var(--accent-cyan);
            font-style: italic;
        }

        .exercise-info .muscle {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        /* Category Tabs - ESTILO PRO TVT */
        .category-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .category-tab {
            padding: 14px 28px;
            background: linear-gradient(145deg, rgba(20, 35, 60, 0.95), rgba(10, 20, 40, 0.98));
            border: 2px solid rgba(34, 211, 238, 0.4);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-weight: 600;
            font-size: 15px;
            color: #ffffff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .category-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(34, 211, 238, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .category-tab:hover::before {
            left: 100%;
        }

        .category-tab:hover {
            border-color: var(--accent-cyan);
            background: linear-gradient(145deg, rgba(34, 211, 238, 0.2), rgba(20, 40, 70, 0.95));
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(34, 211, 238, 0.3), 0 0 15px rgba(34, 211, 238, 0.2);
            color: #22d3ee;
        }

        .category-tab.active {
            border-color: var(--accent-cyan);
            background: linear-gradient(145deg, rgba(34, 211, 238, 0.25), rgba(15, 35, 60, 0.95));
            box-shadow: 0 0 20px rgba(34, 211, 238, 0.4), inset 0 0 20px rgba(34, 211, 238, 0.1);
            color: #22d3ee;
            font-weight: 700;
        }

        /* Summary Section */
        .summary-container {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .summary-item {
            text-align: center;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: 16px;
        }

        .summary-item .icon {
            font-size: 36px;
            margin-bottom: 10px;
        }

        .summary-item .label {
            color: var(--text-muted);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .summary-item .value {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent-cyan);
        }

        /* PDF Preview - Posici√≥n fuera de pantalla para renderizado */
        #pdf-content {
            position: absolute;
            left: -9999px;
            top: 0;
            width: 210mm;
            background: linear-gradient(180deg, #0a1628 0%, #132d4a 100%);
            color: white;
            font-family: 'Inter', Arial, sans-serif;
        }

        #pdf-content.generating {
            position: relative;
            left: 0;
        }

        /* Loading Animation */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 22, 40, 0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 4px solid var(--bg-card);
            border-top-color: var(--accent-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            font-size: 18px;
            color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo-text { font-size: 32px; }
            .header h1 { font-size: 28px; }
            .options-grid { grid-template-columns: 1fr; }
            .progress-container { gap: 10px; }
            .progress-step { padding: 8px 16px; font-size: 14px; }
            .step-number { width: 28px; height: 28px; }
        }

        /* WhatsApp Floating Button */
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(37, 211, 102, 0.5);
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            text-decoration: none;
            animation: pulse-whatsapp 2s infinite;
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(37, 211, 102, 0.7);
        }

        .whatsapp-float svg {
            width: 35px;
            height: 35px;
            fill: white;
        }

        .whatsapp-tooltip {
            position: absolute;
            right: 80px;
            background: white;
            color: #333;
            padding: 12px 18px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            opacity: 0;
            transform: translateX(10px);
            transition: all 0.3s ease;
            pointer-events: none;
        }

        .whatsapp-tooltip::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            border: 8px solid transparent;
            border-left-color: white;
        }

        .whatsapp-float:hover .whatsapp-tooltip {
            opacity: 1;
            transform: translateX(0);
        }

        @keyframes pulse-whatsapp {
            0% { box-shadow: 0 4px 20px rgba(37, 211, 102, 0.5); }
            50% { box-shadow: 0 4px 30px rgba(37, 211, 102, 0.8); }
            100% { box-shadow: 0 4px 20px rgba(37, 211, 102, 0.5); }
        }

        @media (max-width: 768px) {
            .whatsapp-float {
                bottom: 20px;
                right: 20px;
                width: 55px;
                height: 55px;
            }
            .whatsapp-float svg {
                width: 28px;
                height: 28px;
            }
            .whatsapp-tooltip {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    <div class="bg-particles"></div>

    <div class="container">
        <!-- Hero Section estilo TVT -->
        <section class="hero-section">
            <div class="hero-content">
                <div class="logo" style="justify-content: flex-start; margin-bottom: 30px;">
                    <div class="logo-icon">üèãÔ∏è</div>
                    <div class="logo-text">JCV <span>FITNESS</span></div>
                </div>
                <h1>
                    GENERA TU <span class="highlight">RUTINA PERSONALIZADA</span><br>
                    <span class="italic-bold">en minutos</span> con el<br>
                    <span class="highlight">M√âTODO JCV</span>
                </h1>
                <p>Crea tu plan de entrenamiento perfecto. Rutinas dise√±adas para ti, con nombres que entiendes y resultados que se ven.</p>
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number">+5,000</span>
                        <span class="stat-label">Rutinas Generadas</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">60+</span>
                        <span class="stat-label">Ejercicios</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">Personalizado</span>
                    </div>
                </div>
                <button class="cta-button" onclick="document.getElementById('generator-header').scrollIntoView({behavior: 'smooth', block: 'start'})">
                    üöÄ CREAR MI RUTINA GRATIS
                </button>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1583454110551-21f2fa2afe61?w=500&h=600&fit=crop" alt="JCV Fitness Coach" style="border-radius: 20px;">
            </div>
        </section>

        <!-- Testimonios -->
        <section class="testimonials-section">
            <div class="testimonials-title">
                <h2>üí™ LO QUE DICEN NUESTROS USUARIOS</h2>
            </div>
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar">üë®</div>
                        <div class="testimonial-info">
                            <h4>Carlos M.</h4>
                            <span>-8kg en 2 meses</span>
                        </div>
                    </div>
                    <p class="testimonial-text">"La rutina que me gener√≥ fue perfecta para mi nivel. Los nombres en espa√±ol me ayudaron a entender cada ejercicio sin buscar en Google."</p>
                    <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar">üë©</div>
                        <div class="testimonial-info">
                            <h4>Mar√≠a L.</h4>
                            <span>Tonificada en 30 d√≠as</span>
                        </div>
                    </div>
                    <p class="testimonial-text">"Por fin una app que entiende que no tengo equipos en casa. La rutina sin equipo fue incre√≠ble y los resultados se notaron r√°pido."</p>
                    <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="testimonial-avatar">üßî</div>
                        <div class="testimonial-info">
                            <h4>Andr√©s P.</h4>
                            <span>+5kg de m√∫sculo</span>
                        </div>
                    </div>
                    <p class="testimonial-text">"El PDF que genera es muy profesional. Lo llevo al gimnasio y sigo mi rutina sin problemas. 100% recomendado."</p>
                    <div class="testimonial-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                </div>
            </div>
            <!-- Bot√≥n Continuar despu√©s de testimonios -->
            <div style="text-align: center; margin-top: 40px;">
                <button class="cta-button" onclick="document.getElementById('generator-header').scrollIntoView({behavior: 'smooth', block: 'start'})">
                    üëá COMENZAR AHORA
                </button>
            </div>
        </section>

        <!-- Generador -->
        <div id="generator" style="padding-top: 20px;">
        <header class="header" id="generator-header" style="scroll-margin-top: 20px;">
            <h1>GENERADOR DE RUTINAS PERSONALIZADAS</h1>
            <p>Completa los 7 pasos y genera tu rutina personalizada en PDF</p>
        </header>

        <!-- Progress Steps -->
        <div class="progress-container">
            <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <span>Tu Nivel</span>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <span>Objetivo</span>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <span>Tiempo</span>
            </div>
            <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <span>Equipamiento</span>
            </div>
            <div class="progress-step" data-step="5">
                <div class="step-number">5</div>
                <span>Duraci√≥n</span>
            </div>
            <div class="progress-step" data-step="6">
                <div class="step-number">6</div>
                <span>Ejercicios</span>
            </div>
            <div class="progress-step" data-step="7">
                <div class="step-number">7</div>
                <span>¬°Generar!</span>
            </div>
        </div>

        <!-- Step 1: Nivel -->
        <div class="form-section active" id="step-1">
            <div class="section-title">
                <h2>¬øCU√ÅL ES TU NIVEL DE ENTRENAMIENTO?</h2>
                <p>Selecciona el nivel que mejor describe tu experiencia actual</p>
            </div>
            <div class="options-grid">
                <div class="option-card" data-color="green" data-value="principiante" onclick="selectOption(this, 'level')">
                    <div class="option-icon emoji-icon">üå±</div>
                    <h3>Principiante</h3>
                    <div class="subtitle">"Apenas comenzando"</div>
                    <p>Nunca has entrenado o llevas menos de 3 meses. Empezamos suave y seguro.</p>
                </div>
                <div class="option-card" data-color="cyan" data-value="basico" onclick="selectOption(this, 'level')">
                    <div class="option-icon emoji-icon">üèÉ</div>
                    <h3>B√°sico</h3>
                    <div class="subtitle">"Ya le cog√≠ el ritmo"</div>
                    <p>Llevas 3-6 meses entrenando. Conoces los ejercicios b√°sicos.</p>
                </div>
                <div class="option-card" data-color="blue" data-value="intermedio" onclick="selectOption(this, 'level')">
                    <div class="option-icon emoji-icon">üí™</div>
                    <h3>Intermedio</h3>
                    <div class="subtitle">"Esto ya es costumbre"</div>
                    <p>6 meses a 2 a√±os de experiencia. Buscas subir la intensidad.</p>
                </div>
                <div class="option-card" data-color="purple" data-value="avanzado" onclick="selectOption(this, 'level')">
                    <div class="option-icon emoji-icon">ü¶Å</div>
                    <h3>Avanzado</h3>
                    <div class="subtitle">"Soy una bestia"</div>
                    <p>M√°s de 2 a√±os entrenando consistentemente. Listo para retos extremos.</p>
                </div>
                <div class="option-card" data-color="red" data-value="elite" onclick="selectOption(this, 'level')">
                    <div class="option-icon emoji-icon">üëë</div>
                    <h3>√âlite</h3>
                    <div class="subtitle">"Nivel competici√≥n"</div>
                    <p>Atleta o entrenamiento de alto rendimiento. Sin l√≠mites.</p>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-primary" onclick="nextStep()">Continuar ‚Üí</button>
            </div>
        </div>

        <!-- Step 2: Objetivo -->
        <div class="form-section" id="step-2">
            <div class="section-title">
                <h2>¬øCU√ÅL ES TU OBJETIVO PRINCIPAL?</h2>
                <p>Define qu√© quieres lograr con tu entrenamiento</p>
            </div>
            <div class="options-grid">
                <div class="option-card" data-color="orange" data-value="perder_grasa" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">üî•</div>
                    <h3>Quemar Grasa</h3>
                    <div class="subtitle">"Bajar de peso / Definir"</div>
                    <p>Perder esos kilitos de m√°s y marcar el cuerpo. Cardio + fuerza intensa.</p>
                </div>
                <div class="option-card" data-color="red" data-value="ganar_musculo" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">üí™</div>
                    <h3>Ganar M√∫sculo</h3>
                    <div class="subtitle">"Volumen / Hipertrofia"</div>
                    <p>Aumentar masa muscular y fuerza. Ejercicios pesados con progresi√≥n.</p>
                </div>
                <div class="option-card" data-color="pink" data-value="tonificar" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">‚ú®</div>
                    <h3>Tonificar</h3>
                    <div class="subtitle">"Reafirmar el cuerpo"</div>
                    <p>Definir m√∫sculos sin ganar mucho volumen. Balance perfecto.</p>
                </div>
                <div class="option-card" data-color="cyan" data-value="resistencia" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">ü´Ä</div>
                    <h3>Resistencia</h3>
                    <div class="subtitle">"Aguantar m√°s"</div>
                    <p>Mejorar capacidad cardiovascular y aguante f√≠sico general.</p>
                </div>
                <div class="option-card" data-color="green" data-value="flexibilidad" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">üßò</div>
                    <h3>Flexibilidad</h3>
                    <div class="subtitle">"Ser m√°s el√°stico"</div>
                    <p>Mejorar movilidad articular y elasticidad muscular.</p>
                </div>
                <div class="option-card" data-color="blue" data-value="fuerza" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">üèãÔ∏è</div>
                    <h3>Fuerza Pura</h3>
                    <div class="subtitle">"Levantar m√°s peso"</div>
                    <p>Aumentar fuerza m√°xima. Entrenamientos de powerlifting.</p>
                </div>
                <div class="option-card" data-color="yellow" data-value="energia" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">‚ö°</div>
                    <h3>M√°s Energ√≠a</h3>
                    <div class="subtitle">"Sentirme activo"</div>
                    <p>Combatir el sedentarismo y tener m√°s vitalidad en el d√≠a a d√≠a.</p>
                </div>
                <div class="option-card" data-color="purple" data-value="salud" onclick="selectOption(this, 'goal')">
                    <div class="option-icon emoji-icon">‚ù§Ô∏è</div>
                    <h3>Salud General</h3>
                    <div class="subtitle">"Cuidar mi cuerpo"</div>
                    <p>Mantener un estilo de vida saludable y prevenir enfermedades.</p>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">‚Üê Atr√°s</button>
                <button class="btn btn-primary" onclick="nextStep()">Continuar ‚Üí</button>
            </div>
        </div>

        <!-- Step 3: Tiempo por sesi√≥n -->
        <div class="form-section" id="step-3">
            <div class="section-title">
                <h2>¬øCU√ÅNTO TIEMPO TIENES POR SESI√ìN?</h2>
                <p>El tiempo que puedes dedicar a cada entrenamiento</p>
            </div>
            <div class="slider-container">
                <div class="slider-header">
                    <h3>Duraci√≥n del entrenamiento</h3>
                    <div class="slider-value"><span id="time-value">30</span> <span>min</span></div>
                </div>
                <input type="range" id="time-slider" min="10" max="120" value="30" step="5" oninput="updateTimeSlider(this.value)">
                <div style="display: flex; justify-content: space-between; margin-top: 10px; color: var(--text-muted); font-size: 14px;">
                    <span>10 min</span>
                    <span>30 min</span>
                    <span>45 min</span>
                    <span>60 min</span>
                    <span>90 min</span>
                    <span>120 min</span>
                </div>
            </div>
            <div class="options-grid small">
                <div class="option-card selected" data-color="green" data-value="15" onclick="selectTimeOption(this, 15)">
                    <div class="option-icon emoji-icon">‚ö°</div>
                    <h3>Express</h3>
                    <p>10-15 min - Para los que andan a las carreras</p>
                </div>
                <div class="option-card" data-color="cyan" data-value="30" onclick="selectTimeOption(this, 30)">
                    <div class="option-icon emoji-icon">üéØ</div>
                    <h3>R√°pido</h3>
                    <p>20-30 min - Efectivo y al punto</p>
                </div>
                <div class="option-card" data-color="blue" data-value="45" onclick="selectTimeOption(this, 45)">
                    <div class="option-icon emoji-icon">üí™</div>
                    <h3>Est√°ndar</h3>
                    <p>35-45 min - El balance perfecto</p>
                </div>
                <div class="option-card" data-color="purple" data-value="60" onclick="selectTimeOption(this, 60)">
                    <div class="option-icon emoji-icon">üî•</div>
                    <h3>Completo</h3>
                    <p>50-60 min - Entrenamiento completo</p>
                </div>
                <div class="option-card" data-color="orange" data-value="90" onclick="selectTimeOption(this, 90)">
                    <div class="option-icon emoji-icon">ü¶Å</div>
                    <h3>Intensivo</h3>
                    <p>60-90 min - Para los dedicados</p>
                </div>
                <div class="option-card" data-color="red" data-value="120" onclick="selectTimeOption(this, 120)">
                    <div class="option-icon emoji-icon">üëë</div>
                    <h3>M√°ximo</h3>
                    <p>90-120 min - Sesi√≥n de guerrero</p>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">‚Üê Atr√°s</button>
                <button class="btn btn-primary" onclick="nextStep()">Continuar ‚Üí</button>
            </div>
        </div>

        <!-- Step 4: Equipamiento -->
        <div class="form-section" id="step-4">
            <div class="section-title">
                <h2>¬øQU√â EQUIPAMIENTO TIENES DISPONIBLE?</h2>
                <p>Selecciona todo el equipo con el que cuentas (puedes elegir varios)</p>
            </div>
            <div class="options-grid">
                <div class="option-card selected" data-color="green" data-value="sin_equipo" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üôå</div>
                    <h3>Sin Equipo</h3>
                    <div class="subtitle">"A puro cuerpo"</div>
                    <p>Solo tu cuerpo. Ejercicios de peso corporal/calistenia.</p>
                </div>
                <div class="option-card" data-color="cyan" data-value="mancuernas" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üèãÔ∏è</div>
                    <h3>Mancuernas</h3>
                    <div class="subtitle">"Pesas de mano"</div>
                    <p>Mancuernas o pesas libres de cualquier peso.</p>
                </div>
                <div class="option-card" data-color="blue" data-value="bandas" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üîó</div>
                    <h3>Bandas El√°sticas</h3>
                    <div class="subtitle">"Ligas / Therabands"</div>
                    <p>Bandas de resistencia de cualquier nivel.</p>
                </div>
                <div class="option-card" data-color="purple" data-value="barra" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üìè</div>
                    <h3>Barra y Discos</h3>
                    <div class="subtitle">"Barra ol√≠mpica"</div>
                    <p>Barra con discos de peso para ejercicios compuestos.</p>
                </div>
                <div class="option-card" data-color="orange" data-value="banco" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üõãÔ∏è</div>
                    <h3>Banco</h3>
                    <div class="subtitle">"Banco de pesas"</div>
                    <p>Banco plano o ajustable para ejercicios.</p>
                </div>
                <div class="option-card" data-color="pink" data-value="pull_up_bar" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üö™</div>
                    <h3>Barra de Dominadas</h3>
                    <div class="subtitle">"Barra fija"</div>
                    <p>Barra para dominadas y colgarse.</p>
                </div>
                <div class="option-card" data-color="yellow" data-value="kettlebell" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üîî</div>
                    <h3>Kettlebell</h3>
                    <div class="subtitle">"Pesa rusa"</div>
                    <p>Pesa rusa para ejercicios funcionales y bal√≠sticos.</p>
                </div>
                <div class="option-card" data-color="red" data-value="maquinas" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üè¢</div>
                    <h3>M√°quinas de Gym</h3>
                    <div class="subtitle">"Gimnasio completo"</div>
                    <p>Acceso a m√°quinas de gimnasio comercial.</p>
                </div>
                <div class="option-card" data-color="green" data-value="trx" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">‚õìÔ∏è</div>
                    <h3>TRX / Suspensi√≥n</h3>
                    <div class="subtitle">"Correas de suspensi√≥n"</div>
                    <p>Sistema de entrenamiento en suspensi√≥n.</p>
                </div>
                <div class="option-card" data-color="cyan" data-value="step" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">üì¶</div>
                    <h3>Step / Caj√≥n</h3>
                    <div class="subtitle">"Plataforma / Box"</div>
                    <p>Step o caj√≥n para saltos y escalones.</p>
                </div>
                <div class="option-card" data-color="blue" data-value="pelota" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">‚öΩ</div>
                    <h3>Bal√≥n Medicinal</h3>
                    <div class="subtitle">"Medicine Ball"</div>
                    <p>Pelota con peso para ejercicios explosivos.</p>
                </div>
                <div class="option-card" data-color="purple" data-value="cuerda" onclick="toggleEquipment(this)">
                    <div class="option-icon emoji-icon">ü™¢</div>
                    <h3>Cuerda de Saltar</h3>
                    <div class="subtitle">"Lazo"</div>
                    <p>Cuerda para cardio y coordinaci√≥n.</p>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">‚Üê Atr√°s</button>
                <button class="btn btn-primary" onclick="nextStep()">Continuar ‚Üí</button>
            </div>
        </div>

        <!-- Step 5: Duraci√≥n del programa -->
        <div class="form-section" id="step-5">
            <div class="section-title">
                <h2>¬øPOR CU√ÅNTO TIEMPO QUIERES EL PLAN?</h2>
                <p>Selecciona la duraci√≥n de tu programa de entrenamiento</p>
            </div>
            <div class="options-grid">
                <div class="option-card" data-color="green" data-value="1_dia" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üìÖ</div>
                    <h3>1 D√≠a</h3>
                    <div class="subtitle">"Solo hoy"</div>
                    <p>Una rutina completa para hacer hoy mismo.</p>
                </div>
                <div class="option-card" data-color="cyan" data-value="3_dias" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üìÜ</div>
                    <h3>3 D√≠as</h3>
                    <div class="subtitle">"Mini plan"</div>
                    <p>Plan de 3 d√≠as para empezar.</p>
                </div>
                <div class="option-card selected" data-color="blue" data-value="1_semana" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üóìÔ∏è</div>
                    <h3>1 Semana</h3>
                    <div class="subtitle">"Plan semanal"</div>
                    <p>Rutina completa para toda la semana.</p>
                </div>
                <div class="option-card" data-color="purple" data-value="2_semanas" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üìä</div>
                    <h3>2 Semanas</h3>
                    <div class="subtitle">"Quincena fitness"</div>
                    <p>Dos semanas de entrenamiento progresivo.</p>
                </div>
                <div class="option-card" data-color="orange" data-value="1_mes" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üèÜ</div>
                    <h3>1 Mes (30 d√≠as)</h3>
                    <div class="subtitle">"Reto del mes"</div>
                    <p>Plan mensual completo con progresi√≥n.</p>
                </div>
                <div class="option-card" data-color="pink" data-value="6_semanas" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üíé</div>
                    <h3>6 Semanas</h3>
                    <div class="subtitle">"Transformaci√≥n"</div>
                    <p>Programa de transformaci√≥n de 6 semanas.</p>
                </div>
                <div class="option-card" data-color="red" data-value="2_meses" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üî•</div>
                    <h3>2 Meses</h3>
                    <div class="subtitle">"Cambio real"</div>
                    <p>8 semanas para resultados visibles.</p>
                </div>
                <div class="option-card" data-color="yellow" data-value="3_meses" onclick="selectOption(this, 'duration')">
                    <div class="option-icon emoji-icon">üëë</div>
                    <h3>3 Meses</h3>
                    <div class="subtitle">"Transformaci√≥n total"</div>
                    <p>12 semanas de programa completo.</p>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">‚Üê Atr√°s</button>
                <button class="btn btn-primary" onclick="nextStep()">Continuar ‚Üí</button>
            </div>
        </div>

        <!-- Step 6: Ejercicios -->
        <div class="form-section" id="step-6">
            <div class="section-title">
                <h2>¬øQU√â EJERCICIOS QUIERES INCLUIR?</h2>
                <p>Selecciona los ejercicios que te gustan o deja que elijamos por ti</p>
            </div>

            <div class="category-tabs">
                <button class="category-tab active" onclick="filterExercises('todos')">üéØ Todos</button>
                <button class="category-tab" onclick="filterExercises('piernas')">ü¶µ Piernas</button>
                <button class="category-tab" onclick="filterExercises('pecho')">üí™ Pecho</button>
                <button class="category-tab" onclick="filterExercises('espalda')">üîô Espalda</button>
                <button class="category-tab" onclick="filterExercises('brazos')">üí™ Brazos</button>
                <button class="category-tab" onclick="filterExercises('core')">üéØ Core/Abdomen</button>
                <button class="category-tab" onclick="filterExercises('cardio')">ü´Ä Cardio</button>
                <button class="category-tab" onclick="filterExercises('cuerpo_completo')">üèãÔ∏è Cuerpo Completo</button>
            </div>

            <div class="exercise-grid" id="exercise-grid">
                <!-- Ejercicios se cargan din√°micamente -->
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="selectAllExercises()">‚úì Seleccionar Todos</button>
                <button class="btn btn-secondary" onclick="clearExercises()">‚úó Limpiar Selecci√≥n</button>
                <button class="btn btn-secondary" onclick="autoSelectExercises()">üé≤ Selecci√≥n Autom√°tica</button>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">‚Üê Atr√°s</button>
                <button class="btn btn-primary" onclick="nextStep()">Continuar ‚Üí</button>
            </div>
        </div>

        <!-- Step 7: Resumen y Generar -->
        <div class="form-section" id="step-7">
            <div class="section-title">
                <h2>üéâ ¬°TU RUTINA EST√Å LISTA!</h2>
                <p>Revisa tu selecci√≥n y genera tu PDF personalizado</p>
            </div>

            <div class="summary-container">
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="icon">üéØ</div>
                        <div class="label">Nivel</div>
                        <div class="value" id="summary-level">-</div>
                    </div>
                    <div class="summary-item">
                        <div class="icon">üî•</div>
                        <div class="label">Objetivo</div>
                        <div class="value" id="summary-goal">-</div>
                    </div>
                    <div class="summary-item">
                        <div class="icon">‚è±Ô∏è</div>
                        <div class="label">Tiempo/Sesi√≥n</div>
                        <div class="value" id="summary-time">-</div>
                    </div>
                    <div class="summary-item">
                        <div class="icon">üèãÔ∏è</div>
                        <div class="label">Equipamiento</div>
                        <div class="value" id="summary-equipment">-</div>
                    </div>
                    <div class="summary-item">
                        <div class="icon">üìÖ</div>
                        <div class="label">Duraci√≥n</div>
                        <div class="value" id="summary-duration">-</div>
                    </div>
                    <div class="summary-item">
                        <div class="icon">üí™</div>
                        <div class="label">Ejercicios</div>
                        <div class="value" id="summary-exercises">-</div>
                    </div>
                </div>

                <!-- Nombre del usuario -->
                <div style="text-align: center; margin-top: 30px;">
                    <label style="display: block; margin-bottom: 10px; font-size: 18px;">Tu nombre (para personalizar el PDF):</label>
                    <input type="text" id="user-name" placeholder="Ej: Juan Carlos" style="
                        padding: 15px 30px;
                        font-size: 18px;
                        border: 2px solid var(--border-color);
                        border-radius: 50px;
                        background: var(--bg-secondary);
                        color: var(--text-primary);
                        width: 100%;
                        max-width: 400px;
                        text-align: center;
                    ">
                </div>
            </div>

            <div class="nav-buttons" style="flex-direction: column; gap: 15px;">
                <button class="btn btn-generate" onclick="generatePDF()">
                    üìÑ GENERAR MI RUTINA EN PDF
                </button>
                <button class="btn btn-secondary" onclick="prevStep()">‚Üê Atr√°s (Modificar)</button>
            </div>
        </div>
        </div><!-- Cierre del div generator -->
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">Generando tu rutina personalizada...</div>
    </div>

    <!-- PDF Content (Hidden) -->
    <div id="pdf-content"></div>

    <!-- WhatsApp Floating Button -->
    <a href="https://wa.me/573143826430?text=Hola%20JCV%20Fitness!%20%F0%9F%92%AA%20Quiero%20informaci%C3%B3n%20sobre%20las%20rutinas%20personalizadas" target="_blank" class="whatsapp-float" aria-label="Contactar por WhatsApp">
        <div class="whatsapp-tooltip">üí¨ ¬øDudas? ¬°Escr√≠benos!</div>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/>
        </svg>
    </a>

    <script>
        // Estado de la aplicaci√≥n
        const state = {
            currentStep: 1,
            level: '',
            goal: '',
            time: 30,
            equipment: ['sin_equipo'],
            duration: '1_semana',
            selectedExercises: []
        };

        // Base de datos de ejercicios con nombres colombianos y t√©cnicos
        const exercises = [
            // PIERNAS
            { id: 'sentadilla', name: 'Sentadillas', altName: 'Cuclillas', techName: 'Squat', emoji: 'ü¶µ', category: 'piernas', muscle: 'Cu√°driceps, Gl√∫teos', equipment: ['sin_equipo', 'mancuernas', 'barra'] },
            { id: 'sentadilla_sumo', name: 'Sentadilla Sumo', altName: 'Cuclilla abierta', techName: 'Sumo Squat', emoji: 'ü¶µ', category: 'piernas', muscle: 'Aductores, Gl√∫teos', equipment: ['sin_equipo', 'mancuernas', 'kettlebell'] },
            { id: 'sentadilla_bulgara', name: 'Sentadilla B√∫lgara', altName: 'Zancada elevada', techName: 'Bulgarian Split Squat', emoji: 'ü¶µ', category: 'piernas', muscle: 'Cu√°driceps, Gl√∫teos', equipment: ['sin_equipo', 'mancuernas', 'banco'] },
            { id: 'zancadas', name: 'Zancadas', altName: 'Estocadas / Lunges', techName: 'Lunges', emoji: 'üö∂', category: 'piernas', muscle: 'Cu√°driceps, Gl√∫teos', equipment: ['sin_equipo', 'mancuernas'] },
            { id: 'zancada_lateral', name: 'Zancada Lateral', altName: 'Estocada de lado', techName: 'Lateral Lunge', emoji: 'üö∂', category: 'piernas', muscle: 'Aductores, Cu√°driceps', equipment: ['sin_equipo', 'mancuernas'] },
            { id: 'zancada_reversa', name: 'Zancada Reversa', altName: 'Estocada hacia atr√°s', techName: 'Reverse Lunge', emoji: 'üö∂', category: 'piernas', muscle: 'Gl√∫teos, Cu√°driceps', equipment: ['sin_equipo', 'mancuernas'] },
            { id: 'peso_muerto', name: 'Peso Muerto', altName: 'Levantamiento de tierra', techName: 'Deadlift', emoji: 'üèãÔ∏è', category: 'piernas', muscle: 'Isquiotibiales, Espalda baja, Gl√∫teos', equipment: ['barra', 'mancuernas', 'kettlebell'] },
            { id: 'peso_muerto_rumano', name: 'Peso Muerto Rumano', altName: 'Peso muerto piernas r√≠gidas', techName: 'Romanian Deadlift', emoji: 'üèãÔ∏è', category: 'piernas', muscle: 'Isquiotibiales, Gl√∫teos', equipment: ['barra', 'mancuernas'] },
            { id: 'elevacion_talones', name: 'Elevaci√≥n de Talones', altName: 'Pararse en puntas', techName: 'Calf Raises', emoji: 'ü¶∂', category: 'piernas', muscle: 'Pantorrillas', equipment: ['sin_equipo', 'mancuernas', 'step'] },
            { id: 'puente_gluteo', name: 'Puente de Gl√∫teo', altName: 'Elevaci√≥n de cadera', techName: 'Glute Bridge', emoji: 'üçë', category: 'piernas', muscle: 'Gl√∫teos, Isquiotibiales', equipment: ['sin_equipo', 'mancuernas', 'barra'] },
            { id: 'hip_thrust', name: 'Hip Thrust', altName: 'Empuje de cadera con banco', techName: 'Hip Thrust', emoji: 'üçë', category: 'piernas', muscle: 'Gl√∫teos', equipment: ['banco', 'barra', 'mancuernas'] },
            { id: 'patada_gluteo', name: 'Patada de Gl√∫teo', altName: 'Kickback', techName: 'Glute Kickback', emoji: 'üçë', category: 'piernas', muscle: 'Gl√∫teos', equipment: ['sin_equipo', 'bandas'] },
            { id: 'sentadilla_salto', name: 'Sentadilla con Salto', altName: 'Cuclilla explosiva', techName: 'Jump Squat', emoji: 'ü¶ò', category: 'piernas', muscle: 'Cu√°driceps, Gl√∫teos, Cardio', equipment: ['sin_equipo'] },
            { id: 'step_up', name: 'Step Up', altName: 'Subida al caj√≥n/escal√≥n', techName: 'Step Up', emoji: 'üì¶', category: 'piernas', muscle: 'Cu√°driceps, Gl√∫teos', equipment: ['step', 'banco', 'mancuernas'] },
            { id: 'wall_sit', name: 'Wall Sit', altName: 'Silla en la pared', techName: 'Wall Sit', emoji: 'ü™ë', category: 'piernas', muscle: 'Cu√°driceps', equipment: ['sin_equipo'] },
            { id: 'prensa', name: 'Prensa de Piernas', altName: 'Leg Press', techName: 'Leg Press', emoji: 'ü¶µ', category: 'piernas', muscle: 'Cu√°driceps, Gl√∫teos', equipment: ['maquinas'] },
            { id: 'extension_pierna', name: 'Extensi√≥n de Pierna', altName: 'Leg Extension', techName: 'Leg Extension', emoji: 'ü¶µ', category: 'piernas', muscle: 'Cu√°driceps', equipment: ['maquinas'] },
            { id: 'curl_femoral', name: 'Curl Femoral', altName: 'Curl de pierna', techName: 'Leg Curl', emoji: 'ü¶µ', category: 'piernas', muscle: 'Isquiotibiales', equipment: ['maquinas'] },

            // PECHO
            { id: 'flexiones', name: 'Flexiones de Pecho', altName: 'Lagartijas / Planchas', techName: 'Push-Ups', emoji: 'üí™', category: 'pecho', muscle: 'Pectorales, Tr√≠ceps, Hombros', equipment: ['sin_equipo'] },
            { id: 'flexiones_rodillas', name: 'Flexiones en Rodillas', altName: 'Lagartijas f√°ciles', techName: 'Knee Push-Ups', emoji: 'üí™', category: 'pecho', muscle: 'Pectorales, Tr√≠ceps', equipment: ['sin_equipo'] },
            { id: 'flexiones_inclinadas', name: 'Flexiones Inclinadas', altName: 'Lagartijas en pendiente', techName: 'Incline Push-Ups', emoji: 'üí™', category: 'pecho', muscle: 'Pectorales inferior', equipment: ['sin_equipo', 'banco'] },
            { id: 'flexiones_declinadas', name: 'Flexiones Declinadas', altName: 'Lagartijas pies arriba', techName: 'Decline Push-Ups', emoji: 'üí™', category: 'pecho', muscle: 'Pectorales superior', equipment: ['sin_equipo', 'step'] },
            { id: 'flexiones_diamante', name: 'Flexiones Diamante', altName: 'Lagartijas manos juntas', techName: 'Diamond Push-Ups', emoji: 'üíé', category: 'pecho', muscle: 'Tr√≠ceps, Pectorales', equipment: ['sin_equipo'] },
            { id: 'flexiones_anchas', name: 'Flexiones Anchas', altName: 'Lagartijas manos separadas', techName: 'Wide Push-Ups', emoji: 'üí™', category: 'pecho', muscle: 'Pectorales', equipment: ['sin_equipo'] },
            { id: 'press_banca', name: 'Press de Banca', altName: 'Pecho plano con barra', techName: 'Bench Press', emoji: 'üèãÔ∏è', category: 'pecho', muscle: 'Pectorales, Tr√≠ceps', equipment: ['barra', 'banco'] },
            { id: 'press_mancuernas', name: 'Press con Mancuernas', altName: 'Pecho con pesas', techName: 'Dumbbell Press', emoji: 'üèãÔ∏è', category: 'pecho', muscle: 'Pectorales, Tr√≠ceps', equipment: ['mancuernas', 'banco'] },
            { id: 'press_inclinado', name: 'Press Inclinado', altName: 'Pecho superior', techName: 'Incline Press', emoji: 'üèãÔ∏è', category: 'pecho', muscle: 'Pectorales superior', equipment: ['mancuernas', 'banco', 'barra'] },
            { id: 'aperturas', name: 'Aperturas', altName: 'Flies / Cruces', techName: 'Dumbbell Flyes', emoji: 'ü¶Ö', category: 'pecho', muscle: 'Pectorales', equipment: ['mancuernas', 'banco'] },
            { id: 'pullover', name: 'Pullover', altName: 'Pesa por encima de la cabeza', techName: 'Pullover', emoji: 'üèãÔ∏è', category: 'pecho', muscle: 'Pectorales, Dorsales', equipment: ['mancuernas', 'banco'] },
            { id: 'fondos_pecho', name: 'Fondos en Paralelas', altName: 'Dips', techName: 'Chest Dips', emoji: 'üí™', category: 'pecho', muscle: 'Pectorales, Tr√≠ceps', equipment: ['pull_up_bar', 'maquinas'] },

            // ESPALDA
            { id: 'dominadas', name: 'Dominadas', altName: 'Pull-ups / Jalones arriba', techName: 'Pull-Ups', emoji: 'ü¶ç', category: 'espalda', muscle: 'Dorsales, B√≠ceps', equipment: ['pull_up_bar'] },
            { id: 'dominadas_asistidas', name: 'Dominadas Asistidas', altName: 'Pull-ups con banda', techName: 'Assisted Pull-Ups', emoji: 'ü¶ç', category: 'espalda', muscle: 'Dorsales, B√≠ceps', equipment: ['pull_up_bar', 'bandas'] },
            { id: 'dominadas_neutras', name: 'Dominadas Neutras', altName: 'Pull-ups agarre paralelo', techName: 'Neutral Grip Pull-Ups', emoji: 'ü¶ç', category: 'espalda', muscle: 'Dorsales, B√≠ceps', equipment: ['pull_up_bar'] },
            { id: 'remo_mancuerna', name: 'Remo con Mancuerna', altName: 'Jal√≥n de pesa inclinado', techName: 'Dumbbell Row', emoji: 'üö£', category: 'espalda', muscle: 'Dorsales, Romboides', equipment: ['mancuernas', 'banco'] },
            { id: 'remo_barra', name: 'Remo con Barra', altName: 'Remo inclinado', techName: 'Barbell Row', emoji: 'üö£', category: 'espalda', muscle: 'Dorsales, Romboides', equipment: ['barra'] },
            { id: 'remo_invertido', name: 'Remo Invertido', altName: 'Remo australiano', techName: 'Inverted Row', emoji: 'üö£', category: 'espalda', muscle: 'Dorsales, Romboides', equipment: ['pull_up_bar', 'trx'] },
            { id: 'superman', name: 'Superman', altName: 'Extensi√≥n de espalda boca abajo', techName: 'Superman', emoji: 'ü¶∏', category: 'espalda', muscle: 'Espalda baja, Gl√∫teos', equipment: ['sin_equipo'] },
            { id: 'bird_dog', name: 'Bird Dog', altName: 'Perro-P√°jaro / Cuatro puntos', techName: 'Bird Dog', emoji: 'üêï', category: 'espalda', muscle: 'Core, Espalda baja', equipment: ['sin_equipo'] },
            { id: 'face_pull', name: 'Face Pull', altName: 'Jal√≥n a la cara', techName: 'Face Pull', emoji: 'üéØ', category: 'espalda', muscle: 'Deltoides posterior, Romboides', equipment: ['bandas', 'maquinas'] },
            { id: 'jalon_polea', name: 'Jal√≥n en Polea', altName: 'Lat Pulldown', techName: 'Lat Pulldown', emoji: 'üèãÔ∏è', category: 'espalda', muscle: 'Dorsales', equipment: ['maquinas'] },
            { id: 'remo_polea', name: 'Remo en Polea', altName: 'Cable Row', techName: 'Seated Cable Row', emoji: 'üö£', category: 'espalda', muscle: 'Dorsales, Romboides', equipment: ['maquinas'] },
            { id: 'encogimientos', name: 'Encogimientos', altName: 'Shrugs', techName: 'Shrugs', emoji: 'ü§∑', category: 'espalda', muscle: 'Trapecios', equipment: ['mancuernas', 'barra'] },

            // BRAZOS
            { id: 'curl_bicep', name: 'Curl de B√≠ceps', altName: 'Flexi√≥n de codo con peso', techName: 'Bicep Curl', emoji: 'üí™', category: 'brazos', muscle: 'B√≠ceps', equipment: ['mancuernas', 'barra', 'bandas'] },
            { id: 'curl_martillo', name: 'Curl Martillo', altName: 'Curl agarre neutro', techName: 'Hammer Curl', emoji: 'üî®', category: 'brazos', muscle: 'B√≠ceps, Braquial', equipment: ['mancuernas'] },
            { id: 'curl_concentrado', name: 'Curl Concentrado', altName: 'Curl apoyado en pierna', techName: 'Concentration Curl', emoji: 'üí™', category: 'brazos', muscle: 'B√≠ceps', equipment: ['mancuernas'] },
            { id: 'tricep_fondos', name: 'Fondos de Tr√≠ceps', altName: 'Dips en banco/silla', techName: 'Tricep Dips', emoji: 'üí™', category: 'brazos', muscle: 'Tr√≠ceps', equipment: ['sin_equipo', 'banco'] },
            { id: 'extension_tricep', name: 'Extensi√≥n de Tr√≠ceps', altName: 'Patada de tr√≠ceps', techName: 'Tricep Extension', emoji: 'üí™', category: 'brazos', muscle: 'Tr√≠ceps', equipment: ['mancuernas', 'bandas'] },
            { id: 'tricep_overhead', name: 'Tr√≠ceps Overhead', altName: 'Extensi√≥n sobre la cabeza', techName: 'Overhead Tricep Extension', emoji: 'üôÜ', category: 'brazos', muscle: 'Tr√≠ceps', equipment: ['mancuernas'] },
            { id: 'press_frances', name: 'Press Franc√©s', altName: 'Skull Crusher', techName: 'Skull Crusher', emoji: 'üíÄ', category: 'brazos', muscle: 'Tr√≠ceps', equipment: ['barra', 'mancuernas', 'banco'] },
            { id: 'press_militar', name: 'Press Militar', altName: 'Press de hombros', techName: 'Overhead Press', emoji: 'üéñÔ∏è', category: 'brazos', muscle: 'Hombros, Tr√≠ceps', equipment: ['mancuernas', 'barra'] },
            { id: 'elevaciones_laterales', name: 'Elevaciones Laterales', altName: 'Vuelos laterales', techName: 'Lateral Raises', emoji: 'ü¶Ö', category: 'brazos', muscle: 'Deltoides lateral', equipment: ['mancuernas', 'bandas'] },
            { id: 'elevaciones_frontales', name: 'Elevaciones Frontales', altName: 'Vuelos al frente', techName: 'Front Raises', emoji: 'ü¶Ö', category: 'brazos', muscle: 'Deltoides anterior', equipment: ['mancuernas', 'bandas'] },
            { id: 'pajaros', name: 'P√°jaros', altName: 'Elevaciones posteriores', techName: 'Reverse Flyes', emoji: 'üê¶', category: 'brazos', muscle: 'Deltoides posterior', equipment: ['mancuernas', 'bandas'] },
            { id: 'curl_muneca', name: 'Curl de Mu√±eca', altName: 'Flexi√≥n de antebrazo', techName: 'Wrist Curl', emoji: '‚úä', category: 'brazos', muscle: 'Antebrazos', equipment: ['mancuernas'] },

            // CORE / ABDOMEN
            { id: 'plancha', name: 'Plancha', altName: 'Tabla / Plank', techName: 'Plank', emoji: 'üßò', category: 'core', muscle: 'Core completo', equipment: ['sin_equipo'] },
            { id: 'plancha_lateral', name: 'Plancha Lateral', altName: 'Tabla de lado', techName: 'Side Plank', emoji: 'üßò', category: 'core', muscle: 'Oblicuos', equipment: ['sin_equipo'] },
            { id: 'plancha_dinamica', name: 'Plancha Din√°mica', altName: 'Plancha con movimiento', techName: 'Plank to Push-Up', emoji: 'üßò', category: 'core', muscle: 'Core, Tr√≠ceps', equipment: ['sin_equipo'] },
            { id: 'crunch', name: 'Crunch Abdominal', altName: 'Abdominales cortos', techName: 'Crunch', emoji: 'üéØ', category: 'core', muscle: 'Recto abdominal', equipment: ['sin_equipo'] },
            { id: 'crunch_bicicleta', name: 'Crunch Bicicleta', altName: 'Abdominales de bicicleta', techName: 'Bicycle Crunch', emoji: 'üö¥', category: 'core', muscle: 'Oblicuos, Recto abdominal', equipment: ['sin_equipo'] },
            { id: 'crunch_inverso', name: 'Crunch Inverso', altName: 'Abdominales de piernas', techName: 'Reverse Crunch', emoji: 'üîÑ', category: 'core', muscle: 'Abdominales inferiores', equipment: ['sin_equipo'] },
            { id: 'elevacion_piernas', name: 'Elevaci√≥n de Piernas', altName: 'Levantamiento de piernas', techName: 'Leg Raises', emoji: 'ü¶µ', category: 'core', muscle: 'Abdominales inferiores', equipment: ['sin_equipo', 'pull_up_bar'] },
            { id: 'russian_twist', name: 'Russian Twist', altName: 'Giro ruso / Torsi√≥n', techName: 'Russian Twist', emoji: 'üîÑ', category: 'core', muscle: 'Oblicuos', equipment: ['sin_equipo', 'pelota', 'mancuernas'] },
            { id: 'mountain_climber', name: 'Mountain Climbers', altName: 'Escaladores', techName: 'Mountain Climbers', emoji: 'üßó', category: 'core', muscle: 'Core, Cardio', equipment: ['sin_equipo'] },
            { id: 'dead_bug', name: 'Dead Bug', altName: 'Bicho muerto', techName: 'Dead Bug', emoji: 'ü™≤', category: 'core', muscle: 'Core profundo', equipment: ['sin_equipo'] },
            { id: 'v_ups', name: 'V-Ups', altName: 'Abdominales en V', techName: 'V-Ups', emoji: '‚úåÔ∏è', category: 'core', muscle: 'Core completo', equipment: ['sin_equipo'] },
            { id: 'hollow_body', name: 'Hollow Body Hold', altName: 'Posici√≥n hueca', techName: 'Hollow Body Hold', emoji: 'ü•Ñ', category: 'core', muscle: 'Core completo', equipment: ['sin_equipo'] },
            { id: 'ab_wheel', name: 'Rueda Abdominal', altName: 'Ab Wheel Rollout', techName: 'Ab Wheel Rollout', emoji: 'üõû', category: 'core', muscle: 'Core completo', equipment: ['sin_equipo'] },
            { id: 'pallof_press', name: 'Pallof Press', altName: 'Press anti-rotaci√≥n', techName: 'Pallof Press', emoji: 'üéØ', category: 'core', muscle: 'Core, Anti-rotaci√≥n', equipment: ['bandas', 'maquinas'] },

            // CARDIO
            { id: 'burpees', name: 'Burpees', altName: 'Sapito / Salto con lagartija', techName: 'Burpees', emoji: 'üê∏', category: 'cardio', muscle: 'Cuerpo completo, Cardio', equipment: ['sin_equipo'] },
            { id: 'jumping_jacks', name: 'Jumping Jacks', altName: 'Polichinelas / T√≠teres', techName: 'Jumping Jacks', emoji: '‚≠ê', category: 'cardio', muscle: 'Cardio, Cuerpo completo', equipment: ['sin_equipo'] },
            { id: 'high_knees', name: 'High Knees', altName: 'Rodillas arriba / Skiping', techName: 'High Knees', emoji: 'üèÉ', category: 'cardio', muscle: 'Cardio, Core', equipment: ['sin_equipo'] },
            { id: 'butt_kicks', name: 'Butt Kicks', altName: 'Talones al gl√∫teo', techName: 'Butt Kicks', emoji: 'üèÉ', category: 'cardio', muscle: 'Cardio, Isquiotibiales', equipment: ['sin_equipo'] },
            { id: 'saltar_cuerda', name: 'Saltar la Cuerda', altName: 'Saltar lazo', techName: 'Jump Rope', emoji: 'ü™¢', category: 'cardio', muscle: 'Cardio, Pantorrillas', equipment: ['cuerda'] },
            { id: 'box_jumps', name: 'Box Jumps', altName: 'Saltos al caj√≥n', techName: 'Box Jumps', emoji: 'üì¶', category: 'cardio', muscle: 'Piernas, Cardio', equipment: ['step'] },
            { id: 'sprint', name: 'Sprints', altName: 'Carreras cortas / Piques', techName: 'Sprints', emoji: 'üèÉ‚Äç‚ôÇÔ∏è', category: 'cardio', muscle: 'Cardio, Piernas', equipment: ['sin_equipo'] },
            { id: 'skaters', name: 'Skaters', altName: 'Saltos de patinador', techName: 'Skaters', emoji: '‚õ∏Ô∏è', category: 'cardio', muscle: 'Cardio, Piernas', equipment: ['sin_equipo'] },
            { id: 'tuck_jumps', name: 'Tuck Jumps', altName: 'Saltos con rodillas al pecho', techName: 'Tuck Jumps', emoji: 'ü¶ò', category: 'cardio', muscle: 'Cardio, Piernas', equipment: ['sin_equipo'] },
            { id: 'battle_ropes', name: 'Battle Ropes', altName: 'Cuerdas de batalla', techName: 'Battle Ropes', emoji: 'ü™¢', category: 'cardio', muscle: 'Brazos, Cardio', equipment: ['maquinas'] },
            { id: 'rowing', name: 'Remo M√°quina', altName: 'M√°quina de remo', techName: 'Rowing Machine', emoji: 'üö£', category: 'cardio', muscle: 'Cuerpo completo, Cardio', equipment: ['maquinas'] },

            // CUERPO COMPLETO
            { id: 'kettlebell_swing', name: 'Kettlebell Swing', altName: 'Balanceo de pesa rusa', techName: 'Kettlebell Swing', emoji: 'üîî', category: 'cuerpo_completo', muscle: 'Gl√∫teos, Core, Cardio', equipment: ['kettlebell'] },
            { id: 'clean_press', name: 'Clean and Press', altName: 'Cargada y empuje', techName: 'Clean and Press', emoji: 'üèãÔ∏è', category: 'cuerpo_completo', muscle: 'Cuerpo completo', equipment: ['barra', 'mancuernas', 'kettlebell'] },
            { id: 'thruster', name: 'Thrusters', altName: 'Sentadilla + Press', techName: 'Thrusters', emoji: 'üöÄ', category: 'cuerpo_completo', muscle: 'Piernas, Hombros', equipment: ['mancuernas', 'barra', 'kettlebell'] },
            { id: 'turkish_getup', name: 'Turkish Get Up', altName: 'Levantada turca', techName: 'Turkish Get Up', emoji: 'üáπüá∑', category: 'cuerpo_completo', muscle: 'Cuerpo completo', equipment: ['kettlebell', 'mancuernas'] },
            { id: 'man_maker', name: 'Man Makers', altName: 'Burpee con pesas', techName: 'Man Makers', emoji: 'ü¶∏‚Äç‚ôÇÔ∏è', category: 'cuerpo_completo', muscle: 'Cuerpo completo', equipment: ['mancuernas'] },
            { id: 'bear_crawl', name: 'Bear Crawl', altName: 'Caminar como oso', techName: 'Bear Crawl', emoji: 'üêª', category: 'cuerpo_completo', muscle: 'Core, Hombros', equipment: ['sin_equipo'] },
            { id: 'inchworm', name: 'Inchworm', altName: 'Gusanito', techName: 'Inchworm', emoji: 'üêõ', category: 'cuerpo_completo', muscle: 'Core, Isquiotibiales', equipment: ['sin_equipo'] },
            { id: 'devil_press', name: 'Devil Press', altName: 'Press del diablo', techName: 'Devil Press', emoji: 'üòà', category: 'cuerpo_completo', muscle: 'Cuerpo completo', equipment: ['mancuernas'] },
            { id: 'farmers_walk', name: 'Farmer\'s Walk', altName: 'Caminata del granjero', techName: 'Farmer\'s Walk', emoji: 'üö∂', category: 'cuerpo_completo', muscle: 'Agarre, Core, Piernas', equipment: ['mancuernas', 'kettlebell'] },
            { id: 'squat_press', name: 'Squat to Press', altName: 'Sentadilla con press', techName: 'Squat to Press', emoji: 'üèãÔ∏è', category: 'cuerpo_completo', muscle: 'Piernas, Hombros', equipment: ['mancuernas', 'kettlebell'] }
        ];

        // Traducciones
        const translations = {
            levels: {
                'principiante': 'Principiante',
                'basico': 'B√°sico',
                'intermedio': 'Intermedio',
                'avanzado': 'Avanzado',
                'elite': '√âlite'
            },
            goals: {
                'perder_grasa': 'Quemar Grasa',
                'ganar_musculo': 'Ganar M√∫sculo',
                'tonificar': 'Tonificar',
                'resistencia': 'Resistencia',
                'flexibilidad': 'Flexibilidad',
                'fuerza': 'Fuerza Pura',
                'energia': 'M√°s Energ√≠a',
                'salud': 'Salud General'
            },
            durations: {
                '1_dia': '1 D√≠a',
                '3_dias': '3 D√≠as',
                '1_semana': '1 Semana',
                '2_semanas': '2 Semanas',
                '1_mes': '1 Mes',
                '6_semanas': '6 Semanas',
                '2_meses': '2 Meses',
                '3_meses': '3 Meses'
            },
            equipment: {
                'sin_equipo': 'Sin Equipo',
                'mancuernas': 'Mancuernas',
                'bandas': 'Bandas',
                'barra': 'Barra',
                'banco': 'Banco',
                'pull_up_bar': 'Barra Dominadas',
                'kettlebell': 'Kettlebell',
                'maquinas': 'M√°quinas',
                'trx': 'TRX',
                'step': 'Step/Caj√≥n',
                'pelota': 'Bal√≥n Medicinal',
                'cuerda': 'Cuerda'
            }
        };

        // Funciones de navegaci√≥n
        function nextStep() {
            if (validateStep()) {
                if (state.currentStep < 7) {
                    document.getElementById(`step-${state.currentStep}`).classList.remove('active');
                    document.querySelector(`.progress-step[data-step="${state.currentStep}"]`).classList.remove('active');
                    document.querySelector(`.progress-step[data-step="${state.currentStep}"]`).classList.add('completed');

                    state.currentStep++;

                    document.getElementById(`step-${state.currentStep}`).classList.add('active');
                    document.querySelector(`.progress-step[data-step="${state.currentStep}"]`).classList.add('active');

                    if (state.currentStep === 6) {
                        renderExercises();
                    }

                    if (state.currentStep === 7) {
                        updateSummary();
                    }

                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            }
        }

        function prevStep() {
            if (state.currentStep > 1) {
                document.getElementById(`step-${state.currentStep}`).classList.remove('active');
                document.querySelector(`.progress-step[data-step="${state.currentStep}"]`).classList.remove('active');

                state.currentStep--;

                document.getElementById(`step-${state.currentStep}`).classList.add('active');
                document.querySelector(`.progress-step[data-step="${state.currentStep}"]`).classList.remove('completed');
                document.querySelector(`.progress-step[data-step="${state.currentStep}"]`).classList.add('active');

                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function validateStep() {
            switch(state.currentStep) {
                case 1:
                    if (!state.level) {
                        alert('Por favor selecciona tu nivel de entrenamiento');
                        return false;
                    }
                    break;
                case 2:
                    if (!state.goal) {
                        alert('Por favor selecciona tu objetivo');
                        return false;
                    }
                    break;
                case 4:
                    if (state.equipment.length === 0) {
                        alert('Por favor selecciona al menos un tipo de equipamiento');
                        return false;
                    }
                    break;
                case 5:
                    if (!state.duration) {
                        alert('Por favor selecciona la duraci√≥n del programa');
                        return false;
                    }
                    break;
            }
            return true;
        }

        // Funciones de selecci√≥n
        function selectOption(element, type) {
            const container = element.parentElement;
            container.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');
            state[type] = element.dataset.value;
        }

        function selectTimeOption(element, value) {
            const container = element.parentElement;
            container.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');
            state.time = value;
            document.getElementById('time-slider').value = value;
            document.getElementById('time-value').textContent = value;
        }

        function updateTimeSlider(value) {
            state.time = parseInt(value);
            document.getElementById('time-value').textContent = value;

            // Update card selection
            const container = document.querySelector('#step-3 .options-grid');
            container.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
                if (parseInt(card.dataset.value) === parseInt(value)) {
                    card.classList.add('selected');
                }
            });
        }

        function toggleEquipment(element) {
            element.classList.toggle('selected');
            const value = element.dataset.value;

            if (element.classList.contains('selected')) {
                if (!state.equipment.includes(value)) {
                    state.equipment.push(value);
                }
            } else {
                state.equipment = state.equipment.filter(e => e !== value);
            }
        }

        // Funciones de ejercicios
        function renderExercises(filter = 'todos') {
            const grid = document.getElementById('exercise-grid');
            grid.innerHTML = '';

            let filteredExercises = exercises;
            if (filter !== 'todos') {
                filteredExercises = exercises.filter(e => e.category === filter);
            }

            // Filtrar por equipamiento disponible
            filteredExercises = filteredExercises.filter(e =>
                e.equipment.some(eq => state.equipment.includes(eq))
            );

            filteredExercises.forEach(exercise => {
                const isSelected = state.selectedExercises.includes(exercise.id);
                const card = document.createElement('div');
                card.className = `exercise-card ${isSelected ? 'selected' : ''}`;
                card.onclick = () => toggleExercise(exercise.id);
                card.innerHTML = `
                    <div class="exercise-emoji">${exercise.emoji}</div>
                    <div class="exercise-info">
                        <h4>${exercise.name}</h4>
                        <div class="tech-name">"${exercise.altName}" - ${exercise.techName}</div>
                        <div class="muscle">üéØ ${exercise.muscle}</div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function toggleExercise(id) {
            if (state.selectedExercises.includes(id)) {
                state.selectedExercises = state.selectedExercises.filter(e => e !== id);
            } else {
                state.selectedExercises.push(id);
            }
            renderExercises(document.querySelector('.category-tab.active')?.textContent.includes('Todos') ? 'todos' :
                document.querySelector('.category-tab.active')?.textContent.toLowerCase().replace(/[^a-z]/g, ''));
        }

        function filterExercises(category) {
            document.querySelectorAll('.category-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            renderExercises(category);
        }

        function selectAllExercises() {
            const availableExercises = exercises.filter(e =>
                e.equipment.some(eq => state.equipment.includes(eq))
            );
            state.selectedExercises = availableExercises.map(e => e.id);
            renderExercises('todos');
        }

        function clearExercises() {
            state.selectedExercises = [];
            renderExercises('todos');
        }

        function autoSelectExercises() {
            const availableExercises = exercises.filter(e =>
                e.equipment.some(eq => state.equipment.includes(eq))
            );

            // Seleccionar autom√°ticamente basado en objetivo
            const categories = ['piernas', 'pecho', 'espalda', 'brazos', 'core', 'cardio'];
            state.selectedExercises = [];

            categories.forEach(cat => {
                const catExercises = availableExercises.filter(e => e.category === cat);
                const count = Math.min(3, catExercises.length);
                for (let i = 0; i < count; i++) {
                    const randomIndex = Math.floor(Math.random() * catExercises.length);
                    const exercise = catExercises[randomIndex];
                    if (!state.selectedExercises.includes(exercise.id)) {
                        state.selectedExercises.push(exercise.id);
                    }
                }
            });

            renderExercises('todos');
        }

        // Actualizar resumen
        function updateSummary() {
            document.getElementById('summary-level').textContent = translations.levels[state.level] || state.level;
            document.getElementById('summary-goal').textContent = translations.goals[state.goal] || state.goal;
            document.getElementById('summary-time').textContent = state.time + ' min';
            document.getElementById('summary-equipment').textContent = state.equipment.map(e => translations.equipment[e]).join(', ');
            document.getElementById('summary-duration').textContent = translations.durations[state.duration] || state.duration;
            document.getElementById('summary-exercises').textContent = state.selectedExercises.length + ' ejercicios';

            // Auto-select exercises if none selected
            if (state.selectedExercises.length === 0) {
                autoSelectExercises();
                document.getElementById('summary-exercises').textContent = state.selectedExercises.length + ' ejercicios (auto)';
            }
        }

        // Generar PDF usando jsPDF + html2canvas directamente
        async function generatePDF() {
            const loading = document.getElementById('loading');
            loading.classList.add('active');

            try {
                const userName = document.getElementById('user-name').value || 'Campe√≥n';
                const pdfContent = generatePDFContent(userName);
                const element = document.getElementById('pdf-content');
                const filename = `JCV_Fitness_Rutina_${userName.replace(/\s+/g, '_')}.pdf`;

                // Insertar contenido
                element.innerHTML = pdfContent;

                // Hacer visible el elemento temporalmente (CR√çTICO para html2canvas)
                element.style.position = 'fixed';
                element.style.left = '0';
                element.style.top = '0';
                element.style.width = '794px'; // A4 width at 96 DPI
                element.style.zIndex = '9999';
                element.style.background = 'linear-gradient(180deg, #0a1628 0%, #132d4a 100%)';
                element.style.overflow = 'visible';

                // Scroll al inicio del documento
                window.scrollTo(0, 0);

                // Esperar renderizado
                await new Promise(resolve => setTimeout(resolve, 800));

                // Capturar con html2canvas
                console.log('Capturando contenido...');
                const canvas = await html2canvas(element, {
                    scale: 2,
                    useCORS: true,
                    allowTaint: true,
                    backgroundColor: '#0a1628',
                    logging: false,
                    width: element.scrollWidth,
                    height: element.scrollHeight,
                    windowWidth: element.scrollWidth,
                    windowHeight: element.scrollHeight
                });

                console.log('Canvas creado:', canvas.width, 'x', canvas.height);

                // Crear PDF con jsPDF
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });

                const pageWidth = 210; // A4 width in mm
                const pageHeight = 297; // A4 height in mm
                const imgWidth = pageWidth;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;

                // Agregar imagen al PDF (m√∫ltiples p√°ginas si es necesario)
                let heightLeft = imgHeight;
                let position = 0;
                const imgData = canvas.toDataURL('image/jpeg', 0.95);

                // Primera p√°gina
                pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;

                // P√°ginas adicionales si el contenido es m√°s largo que una p√°gina
                while (heightLeft > 0) {
                    position = heightLeft - imgHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }

                console.log('PDF generado con', pdf.getNumberOfPages(), 'p√°ginas');

                // Ocultar elemento
                element.style.position = 'absolute';
                element.style.left = '-9999px';
                element.style.zIndex = '-1';

                // Guardar PDF
                pdf.save(filename);

                loading.classList.remove('active');
                alert('‚úÖ ¬°Tu rutina ha sido generada! Revisa tu carpeta de descargas.');

            } catch (error) {
                console.error('Error generando PDF:', error);
                loading.classList.remove('active');

                const element = document.getElementById('pdf-content');
                element.style.position = 'absolute';
                element.style.left = '-9999px';
                element.innerHTML = '';

                alert('‚ö†Ô∏è Hubo un problema generando el PDF: ' + error.message);
            }
        }

        function generatePDFContent(userName) {
            const selectedExerciseData = state.selectedExercises.map(id => exercises.find(e => e.id === id));

            // Agrupar ejercicios por categor√≠a
            const exercisesByCategory = {};
            selectedExerciseData.forEach(e => {
                if (!exercisesByCategory[e.category]) {
                    exercisesByCategory[e.category] = [];
                }
                exercisesByCategory[e.category].push(e);
            });

            // Calcular d√≠as basado en duraci√≥n
            const daysMap = {
                '1_dia': 1,
                '3_dias': 3,
                '1_semana': 7,
                '2_semanas': 14,
                '1_mes': 30,
                '6_semanas': 42,
                '2_meses': 60,
                '3_meses': 90
            };
            const totalDays = daysMap[state.duration];

            // Generar rutina semanal
            const weekDays = ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo'];
            const categoryNames = {
                'piernas': 'ü¶µ PIERNAS',
                'pecho': 'üí™ PECHO',
                'espalda': 'üîô ESPALDA',
                'brazos': 'üí™ BRAZOS',
                'core': 'üéØ CORE',
                'cardio': 'ü´Ä CARDIO',
                'cuerpo_completo': 'üèãÔ∏è CUERPO COMPLETO'
            };

            // Sets y reps basados en objetivo y nivel
            const setsReps = getSetsReps(state.level, state.goal);

            let html = `
                <div style="font-family: 'Inter', Arial, sans-serif; background: linear-gradient(180deg, #0a1628 0%, #132d4a 100%); color: white; padding: 40px; min-height: 297mm;">
                    <!-- PORTADA -->
                    <div style="text-align: center; padding: 60px 20px; min-height: 250mm;">
                        <div style="font-size: 80px; margin-bottom: 20px;">üí™</div>
                        <div style="font-family: 'Bebas Neue', sans-serif; font-size: 72px; letter-spacing: 5px; margin-bottom: 10px;">JCV FITNESS</div>
                        <div style="width: 100px; height: 4px; background: linear-gradient(90deg, #22d3ee, #3b82f6); margin: 30px auto;"></div>
                        <div style="font-size: 36px; font-weight: 300; margin-bottom: 40px; color: #22d3ee;">RUTINA PERSONALIZADA</div>

                        <div style="background: rgba(34, 211, 238, 0.1); border: 2px solid rgba(34, 211, 238, 0.3); border-radius: 20px; padding: 40px; margin: 40px 0; max-width: 500px; margin-left: auto; margin-right: auto;">
                            <div style="font-size: 24px; color: #94a3b8; margin-bottom: 10px;">Preparada para</div>
                            <div style="font-size: 48px; font-weight: 800; color: #22d3ee;">${userName}</div>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 60px;">
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üéØ</div>
                                <div style="color: #64748b; font-size: 14px;">OBJETIVO</div>
                                <div style="font-size: 18px; font-weight: 600; color: #22d3ee;">${translations.goals[state.goal]}</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">‚è±Ô∏è</div>
                                <div style="color: #64748b; font-size: 14px;">DURACI√ìN</div>
                                <div style="font-size: 18px; font-weight: 600; color: #22d3ee;">${translations.durations[state.duration]}</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.05); padding: 25px; border-radius: 15px;">
                                <div style="font-size: 32px; margin-bottom: 10px;">üèãÔ∏è</div>
                                <div style="color: #64748b; font-size: 14px;">NIVEL</div>
                                <div style="font-size: 18px; font-weight: 600; color: #22d3ee;">${translations.levels[state.level]}</div>
                            </div>
                        </div>

                        <div style="margin-top: 80px; color: #64748b; font-size: 14px;">
                            Generado el ${new Date().toLocaleDateString('es-CO', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
                        </div>
                    </div>

                    <!-- P√ÅGINA DE RESUMEN -->
                    <div style="page-break-before: always; padding: 40px 0;">
                        <div style="text-align: center; margin-bottom: 40px;">
                            <div style="font-size: 36px; font-weight: 800; margin-bottom: 10px;">üìã TU PLAN DE ENTRENAMIENTO</div>
                            <div style="color: #94a3b8;">Todo lo que necesitas saber sobre tu rutina</div>
                        </div>

                        <div style="background: rgba(34, 211, 238, 0.1); border-left: 4px solid #22d3ee; padding: 25px; border-radius: 0 15px 15px 0; margin-bottom: 30px;">
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 15px;">‚ö° Datos de tu Programa</div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                <div><span style="color: #64748b;">Sesiones por d√≠a:</span> <strong>${state.time} minutos</strong></div>
                                <div><span style="color: #64748b;">Total de d√≠as:</span> <strong>${totalDays} d√≠as</strong></div>
                                <div><span style="color: #64748b;">Ejercicios incluidos:</span> <strong>${state.selectedExercises.length}</strong></div>
                                <div><span style="color: #64748b;">Equipamiento:</span> <strong>${state.equipment.map(e => translations.equipment[e]).join(', ')}</strong></div>
                            </div>
                        </div>

                        <div style="font-size: 20px; font-weight: 700; margin: 30px 0 20px;">üèãÔ∏è EJERCICIOS DE TU RUTINA</div>
                        <div style="font-size: 14px; color: #94a3b8; margin-bottom: 20px;">Nombre coloquial (Como se dice en Colombia) - <em>Nombre t√©cnico en ingl√©s</em></div>

                        ${Object.entries(exercisesByCategory).map(([category, exs]) => `
                            <div style="margin-bottom: 25px;">
                                <div style="font-size: 16px; font-weight: 700; color: #22d3ee; margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid rgba(34, 211, 238, 0.3);">
                                    ${categoryNames[category] || category.toUpperCase()}
                                </div>
                                ${exs.map(e => `
                                    <div style="display: flex; align-items: center; gap: 15px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 10px; margin-bottom: 8px;">
                                        <div style="font-size: 24px;">${e.emoji}</div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600;">${e.name}</div>
                                            <div style="font-size: 13px; color: #22d3ee;">"${e.altName}" - <em>${e.techName}</em></div>
                                            <div style="font-size: 12px; color: #64748b;">üéØ ${e.muscle}</div>
                                        </div>
                                        <div style="text-align: right; font-size: 14px;">
                                            <div style="color: #f59e0b; font-weight: 600;">${setsReps.sets} series</div>
                                            <div style="color: #94a3b8;">${setsReps.reps}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `).join('')}
                    </div>
            `;

            // Generar p√°ginas de rutina diaria (simplificado para los primeros 7 d√≠as o menos)
            const daysToShow = Math.min(7, totalDays);
            const routinePatterns = generateRoutinePattern(exercisesByCategory, state.goal);

            for (let day = 1; day <= daysToShow; day++) {
                const dayName = weekDays[(day - 1) % 7];
                const dayRoutine = routinePatterns[(day - 1) % routinePatterns.length];

                html += `
                    <div style="page-break-before: always; padding: 40px 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                            <div>
                                <div style="font-size: 14px; color: #64748b; text-transform: uppercase;">D√≠a ${day} de ${totalDays}</div>
                                <div style="font-size: 36px; font-weight: 800;">${dayName.toUpperCase()}</div>
                                <div style="color: #22d3ee; font-size: 18px;">${dayRoutine.focus}</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 48px;">${dayRoutine.emoji}</div>
                                <div style="color: #f59e0b;">‚è±Ô∏è ${state.time} min</div>
                            </div>
                        </div>

                        <!-- Calentamiento -->
                        <div style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(239, 68, 68, 0.1) 100%); border-radius: 15px; padding: 20px; margin-bottom: 25px;">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 15px;">üî• CALENTAMIENTO (5 min)</div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 14px;">
                                <div>‚Ä¢ Trote en el puesto - 1 min</div>
                                <div>‚Ä¢ Jumping Jacks - 1 min</div>
                                <div>‚Ä¢ Rotaci√≥n de brazos - 1 min</div>
                                <div>‚Ä¢ Rodillas al pecho - 1 min</div>
                                <div>‚Ä¢ Sentadillas suaves - 1 min</div>
                            </div>
                        </div>

                        <!-- Ejercicios del d√≠a -->
                        <div style="font-size: 20px; font-weight: 700; margin-bottom: 20px;">üí™ RUTINA PRINCIPAL</div>

                        ${dayRoutine.exercises.map((e, idx) => `
                            <div style="display: flex; align-items: center; gap: 15px; padding: 18px; background: rgba(255,255,255,0.05); border-radius: 12px; margin-bottom: 12px; border-left: 4px solid ${idx % 2 === 0 ? '#22d3ee' : '#3b82f6'};">
                                <div style="font-size: 28px; width: 50px; text-align: center;">${e.emoji}</div>
                                <div style="flex: 1;">
                                    <div style="font-size: 18px; font-weight: 700;">${e.name}</div>
                                    <div style="font-size: 13px; color: #22d3ee;">"${e.altName}" - ${e.techName}</div>
                                    <div style="font-size: 12px; color: #64748b; margin-top: 4px;">üéØ ${e.muscle}</div>
                                </div>
                                <div style="text-align: center; min-width: 100px;">
                                    <div style="font-size: 24px; font-weight: 800; color: #f59e0b;">${setsReps.sets}x${setsReps.reps.split(' ')[0]}</div>
                                    <div style="font-size: 12px; color: #94a3b8;">Descanso: ${setsReps.rest}</div>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 5px;">
                                    ${Array(parseInt(setsReps.sets)).fill().map((_, i) => `
                                        <div style="width: 24px; height: 24px; border: 2px solid #22d3ee; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 10px; color: #64748b;">${i + 1}</div>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}

                        <!-- Enfriamiento -->
                        <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(34, 211, 238, 0.1) 100%); border-radius: 15px; padding: 20px; margin-top: 25px;">
                            <div style="font-size: 18px; font-weight: 700; margin-bottom: 15px;">üßò ENFRIAMIENTO Y ESTIRAMIENTOS (5 min)</div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 14px;">
                                <div>‚Ä¢ Estiramiento de cu√°driceps - 30s c/lado</div>
                                <div>‚Ä¢ Estiramiento de isquiotibiales - 30s c/lado</div>
                                <div>‚Ä¢ Estiramiento de hombros - 30s c/lado</div>
                                <div>‚Ä¢ Respiraci√≥n profunda - 1 min</div>
                            </div>
                        </div>

                        <!-- Notas del d√≠a -->
                        <div style="margin-top: 25px; padding: 20px; border: 2px dashed rgba(34, 211, 238, 0.3); border-radius: 15px;">
                            <div style="font-size: 14px; color: #64748b; margin-bottom: 10px;">üìù Notas del d√≠a:</div>
                            <div style="height: 60px;"></div>
                        </div>
                    </div>
                `;
            }

            // Si hay m√°s d√≠as, agregar p√°gina de resumen semanal
            if (totalDays > 7) {
                html += `
                    <div style="page-break-before: always; padding: 40px 0;">
                        <div style="text-align: center; margin-bottom: 40px;">
                            <div style="font-size: 36px; font-weight: 800; margin-bottom: 10px;">üìÖ CALENDARIO DE ${totalDays} D√çAS</div>
                            <div style="color: #94a3b8;">Repite el patr√≥n semanal durante todo el programa</div>
                        </div>

                        <div style="background: rgba(34, 211, 238, 0.1); border-radius: 15px; padding: 30px; margin-bottom: 30px;">
                            <div style="font-size: 20px; font-weight: 700; margin-bottom: 20px;">üí° PATR√ìN SEMANAL A REPETIR</div>
                            <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; text-align: center;">
                                ${weekDays.map((day, idx) => {
                                    const pattern = routinePatterns[idx % routinePatterns.length];
                                    return `
                                        <div style="padding: 15px; background: rgba(0,0,0,0.2); border-radius: 10px;">
                                            <div style="font-size: 24px; margin-bottom: 8px;">${pattern.emoji}</div>
                                            <div style="font-size: 12px; font-weight: 600;">${day.substring(0, 3).toUpperCase()}</div>
                                            <div style="font-size: 10px; color: #22d3ee;">${pattern.focus.substring(0, 15)}</div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>

                        <div style="font-size: 20px; font-weight: 700; margin-bottom: 20px;">‚úÖ REGISTRO DE PROGRESO</div>
                        <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;">
                            ${Array(Math.min(totalDays, 42)).fill().map((_, i) => `
                                <div style="padding: 15px; background: rgba(255,255,255,0.03); border: 1px solid rgba(34, 211, 238, 0.2); border-radius: 8px; text-align: center; min-height: 60px;">
                                    <div style="font-size: 12px; color: #64748b;">D√≠a</div>
                                    <div style="font-size: 20px; font-weight: 700;">${i + 1}</div>
                                    <div style="font-size: 16px; margin-top: 5px;">‚òê</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            // P√°gina final motivacional
            html += `
                <div style="page-break-before: always; padding: 60px 20px; text-align: center; min-height: 250mm; display: flex; flex-direction: column; justify-content: center;">
                    <div style="font-size: 100px; margin-bottom: 30px;">üèÜ</div>
                    <div style="font-size: 48px; font-weight: 800; margin-bottom: 20px;">¬°T√ö PUEDES, ${userName.toUpperCase()}!</div>
                    <div style="width: 100px; height: 4px; background: linear-gradient(90deg, #22d3ee, #3b82f6); margin: 30px auto;"></div>

                    <div style="max-width: 600px; margin: 0 auto; font-size: 20px; line-height: 1.8; color: #94a3b8;">
                        "El √∫nico entrenamiento malo es el que no hiciste.
                        <br><br>
                        Cada repetici√≥n cuenta, cada d√≠a suma.
                        <br><br>
                        En ${totalDays} d√≠as, la persona que te mire en el espejo
                        ser√° m√°s fuerte, m√°s segura y m√°s saludable."
                    </div>

                    <div style="margin-top: 60px; padding: 30px; background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(239, 68, 68, 0.1) 100%); border-radius: 20px; display: inline-block;">
                        <div style="font-size: 24px; font-weight: 700; color: #f59e0b;">üî• ¬°TRANSFORMA TU VIDA!</div>
                    </div>

                    <div style="margin-top: 80px;">
                        <div style="font-size: 36px; font-weight: 800;">JCV <span style="color: #22d3ee;">FITNESS</span></div>
                        <div style="color: #64748b; margin-top: 10px;">Revoluciona tu entrenamiento</div>
                    </div>
                </div>
            </div>
            `;

            return html;
        }

        function getSetsReps(level, goal) {
            const configs = {
                'principiante': {
                    'perder_grasa': { sets: '3', reps: '12-15 reps', rest: '30-45s' },
                    'ganar_musculo': { sets: '3', reps: '10-12 reps', rest: '60s' },
                    'tonificar': { sets: '3', reps: '12-15 reps', rest: '45s' },
                    'resistencia': { sets: '2', reps: '15-20 reps', rest: '30s' },
                    'flexibilidad': { sets: '2', reps: '30s hold', rest: '15s' },
                    'fuerza': { sets: '3', reps: '8-10 reps', rest: '90s' },
                    'energia': { sets: '2', reps: '12-15 reps', rest: '30s' },
                    'salud': { sets: '2', reps: '12-15 reps', rest: '45s' }
                },
                'basico': {
                    'perder_grasa': { sets: '3', reps: '15-18 reps', rest: '30s' },
                    'ganar_musculo': { sets: '4', reps: '10-12 reps', rest: '60s' },
                    'tonificar': { sets: '3', reps: '12-15 reps', rest: '40s' },
                    'resistencia': { sets: '3', reps: '18-20 reps', rest: '25s' },
                    'flexibilidad': { sets: '3', reps: '45s hold', rest: '15s' },
                    'fuerza': { sets: '4', reps: '6-8 reps', rest: '90s' },
                    'energia': { sets: '3', reps: '12-15 reps', rest: '30s' },
                    'salud': { sets: '3', reps: '12-15 reps', rest: '45s' }
                },
                'intermedio': {
                    'perder_grasa': { sets: '4', reps: '15-20 reps', rest: '25s' },
                    'ganar_musculo': { sets: '4', reps: '8-12 reps', rest: '75s' },
                    'tonificar': { sets: '4', reps: '12-15 reps', rest: '35s' },
                    'resistencia': { sets: '4', reps: '20-25 reps', rest: '20s' },
                    'flexibilidad': { sets: '3', reps: '60s hold', rest: '15s' },
                    'fuerza': { sets: '5', reps: '5-6 reps', rest: '120s' },
                    'energia': { sets: '3', reps: '15-18 reps', rest: '25s' },
                    'salud': { sets: '3', reps: '12-15 reps', rest: '40s' }
                },
                'avanzado': {
                    'perder_grasa': { sets: '4', reps: '18-22 reps', rest: '20s' },
                    'ganar_musculo': { sets: '5', reps: '8-10 reps', rest: '90s' },
                    'tonificar': { sets: '4', reps: '15-18 reps', rest: '30s' },
                    'resistencia': { sets: '4', reps: '25-30 reps', rest: '15s' },
                    'flexibilidad': { sets: '4', reps: '90s hold', rest: '10s' },
                    'fuerza': { sets: '5', reps: '3-5 reps', rest: '180s' },
                    'energia': { sets: '4', reps: '15-20 reps', rest: '20s' },
                    'salud': { sets: '4', reps: '12-15 reps', rest: '35s' }
                },
                'elite': {
                    'perder_grasa': { sets: '5', reps: '20-25 reps', rest: '15s' },
                    'ganar_musculo': { sets: '6', reps: '6-10 reps', rest: '90s' },
                    'tonificar': { sets: '5', reps: '15-20 reps', rest: '25s' },
                    'resistencia': { sets: '5', reps: '30+ reps', rest: '10s' },
                    'flexibilidad': { sets: '4', reps: '120s hold', rest: '10s' },
                    'fuerza': { sets: '6', reps: '1-3 reps', rest: '240s' },
                    'energia': { sets: '4', reps: '20-25 reps', rest: '15s' },
                    'salud': { sets: '4', reps: '15-18 reps', rest: '30s' }
                }
            };

            return configs[level]?.[goal] || { sets: '3', reps: '12 reps', rest: '45s' };
        }

        function generateRoutinePattern(exercisesByCategory, goal) {
            const patterns = [];
            const categories = Object.keys(exercisesByCategory);

            // Crear patrones de entrenamiento basados en el objetivo
            const goalPatterns = {
                'perder_grasa': [
                    { focus: 'HIIT + Core', emoji: 'üî•', categories: ['cardio', 'core'] },
                    { focus: 'Piernas + Cardio', emoji: 'ü¶µ', categories: ['piernas', 'cardio'] },
                    { focus: 'Tren Superior', emoji: 'üí™', categories: ['pecho', 'brazos'] },
                    { focus: 'Full Body Quema Grasa', emoji: '‚ö°', categories: ['cuerpo_completo', 'cardio'] },
                    { focus: 'Espalda + Core', emoji: 'üîô', categories: ['espalda', 'core'] },
                    { focus: 'Circuito Total', emoji: 'üèãÔ∏è', categories: ['piernas', 'pecho', 'cardio'] },
                    { focus: 'Descanso Activo', emoji: 'üßò', categories: ['core'] }
                ],
                'ganar_musculo': [
                    { focus: 'Pecho + Tr√≠ceps', emoji: 'üí™', categories: ['pecho', 'brazos'] },
                    { focus: 'Espalda + B√≠ceps', emoji: 'ü¶ç', categories: ['espalda', 'brazos'] },
                    { focus: 'Piernas Completo', emoji: 'ü¶µ', categories: ['piernas'] },
                    { focus: 'Hombros + Core', emoji: 'üéØ', categories: ['brazos', 'core'] },
                    { focus: 'Pecho + Espalda', emoji: 'üí™', categories: ['pecho', 'espalda'] },
                    { focus: 'Piernas + Gl√∫teos', emoji: 'üçë', categories: ['piernas'] },
                    { focus: 'Descanso', emoji: 'üò¥', categories: ['core'] }
                ],
                'default': [
                    { focus: 'Tren Superior', emoji: 'üí™', categories: ['pecho', 'espalda', 'brazos'] },
                    { focus: 'Tren Inferior', emoji: 'ü¶µ', categories: ['piernas'] },
                    { focus: 'Core + Cardio', emoji: 'üéØ', categories: ['core', 'cardio'] },
                    { focus: 'Full Body', emoji: 'üèãÔ∏è', categories: ['cuerpo_completo'] },
                    { focus: 'Push (Empuje)', emoji: 'üí™', categories: ['pecho', 'brazos'] },
                    { focus: 'Pull (Tir√≥n)', emoji: 'ü¶ç', categories: ['espalda', 'brazos'] },
                    { focus: 'Descanso Activo', emoji: 'üßò', categories: ['core'] }
                ]
            };

            const selectedPattern = goalPatterns[goal] || goalPatterns['default'];

            selectedPattern.forEach(day => {
                const dayExercises = [];
                day.categories.forEach(cat => {
                    if (exercisesByCategory[cat]) {
                        // Agregar 2-3 ejercicios de cada categor√≠a
                        const catExercises = exercisesByCategory[cat].slice(0, 3);
                        dayExercises.push(...catExercises);
                    }
                });

                // Limitar a 6-8 ejercicios por d√≠a
                patterns.push({
                    focus: day.focus,
                    emoji: day.emoji,
                    exercises: dayExercises.slice(0, 8)
                });
            });

            return patterns;
        }

        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            // Set defaults
            state.duration = '1_semana';
            state.time = 30;
        });
    </script>
</body>
</html>

